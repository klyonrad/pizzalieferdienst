<!DOCTYPE html>

<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css" />
		<meta charset="UTF-8" />
		<title>Pizzabestellung</title>
		<script type="text/javascript">
			gesamt = 0.0;
			var Map = {};
			function Hinzufuegen (pizza, preis) {
				Map[pizza] = preis;
				NeuerEintrag = new Option(pizza, pizza, false, false);
				document.input.pizzasToOrder.options[document.input.pizzasToOrder.length] = NeuerEintrag;
				gesamt = gesamt + preis;
				document.input.price.value = "Preis: " + gesamt.toFixed(2) + "€";
			}
			
			function resetAll(){
				document.input.pizzasToOrder.options.length = 0;
				gesamt = 0.0;
				document.input.price.value = "Preis: " + gesamt.toFixed(2) + "€";
				document.input.addressentry.value = "";
			}
			
			function deleteSelected(){
				pizza = document.input.pizzasToOrder.options[document.input.pizzasToOrder.selectedIndex].value;
				if (pizza in Map)
					gesamt = gesamt - Map[pizza];
				document.input.pizzasToOrder.options[document.input.pizzasToOrder.selectedIndex] = null;
				document.input.price.value = "Preis: " + gesamt.toFixed(2) + "€";
			
			}
				
			function bestellen(){
				bestellung = "http://www.fbi.h-da.de/cgi-bin/Echo.pl?";
				if(document.input.pizzasToOrder.length > 0 && document.input.addressentry.value != ""){
					bestellung = bestellung + "Name=" + document.input.addressentry.value;
					for(i =0; i < document.input.pizzasToOrder.length; i++){
						bestellung = bestellung + "&" + "Pizza" + i + "=" + document.input.pizzasToOrder.options[i].value;
					}
					
					window.location.href = bestellung;
				}else {
					alert("Die \bBestellung ist nicht vollständig! \n\nHaben sie evtl:\n  keine Pizza ausgewählt?\n  keine Adresse angegeben?");
				}
			}	
    </script>
	</head>
	
	<body>
	<h1>Bestellung</h1>
	<form name="input" action="http://www.fbi.h-da.de/cgi-bin/Echo.pl" method="get">
	<div class="artikel">
	      <table>
		<tr><td><img src="pizza.png" alt="Pizzaaa!!" height="90" width="130" onClick="Hinzufuegen('Margherita', 4.0)"> Margherita&nbsp;4,00€</td></tr>
		<tr><td><img src="pizza.png" alt="Pizzaaa!!" height="90" width="130" onClick="Hinzufuegen('Salami', 4.5)"> Salami&nbsp;4,50€</td></tr>
		<tr><td><img src="pizza.png" alt="Pizzaaa!!" height="90" width="130" onClick="Hinzufuegen('Hawaii', 5.5)"> Hawaii&nbsp;5,50€</td></tr>
	      </table>
	</div>
	<div class="content">
	  <div class="bestellung">
		<select name="pizzasToOrder" size="10" style="width: 250px"></select>
	  </div>
	  <div class="bestellung">
		<input name="price" type="text" value="Preis: 0.00€" size="30" disabled>
	  </div>
	  <div class="bestellung">
		<input type="text" name="addressentry" size="30" placeholder="Name, Straße Hausnummer"/>
	  </div>
	  <div class="bestellung">
		<button type="button" onClick="resetAll()">Alle Löschen</button> 
		<button type="button" onClick="deleteSelected()">Auswahl Löschen</button> 	
		<button type="button" onClick="bestellen()">Bestellen</button> 
	  </div>
	</div>
	</form>
	</body>
</html>